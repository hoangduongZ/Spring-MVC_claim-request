<!DOCTYPE html>
<html lang="en" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
      layout:decorate="layouts/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo yêu cầu mới</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f3e8ff; /* Màu nền tím nhạt */
        }
    </style>
</head>
<body>
<main layout:fragment="content" class="w-full mx-auto p-6">
    <form action="@{/claims}" method="post" class="bg-white shadow-md rounded-lg px-8 pt-6 pb-8 mb-4">
        <h2 class="text-center text-2xl font-bold text-purple-600">Tạo yêu cầu mới</h2>
        <div class="mt-4">
            <label for="title" class="block text-gray-700">Tiêu đề yêu cầu:</label>
            <input type="text" id="title" name="title" class="mt-1 block w-full p-2 border border-gray-300 rounded" placeholder="Nhập tiêu đề yêu cầu" required>
        </div>
        <div class="mt-4">
            <label for="date" class="block text-gray-700">Ngày:</label>
            <input type="date" id="date" name="date" class="mt-1 block w-full p-2 border border-gray-300 rounded" required>
        </div>
        <div class="mt-4">
            <label for="start-time" class="block text-gray-700">Giờ bắt đầu:</label>
            <input type="time" id="start-time" name="startTime" class="mt-1 block w-full p-2 border border-gray-300 rounded" required>
        </div>
        <div class="mt-4">
            <label for="end-time" class="block text-gray-700">Giờ kết thúc:</label>
            <input type="time" id="end-time" name="endTime" class="mt-1 block w-full p-2 border border-gray-300 rounded" required>
        </div>
        <div class="mt-4">
            <label for="hours" class="block text-gray-700">Số giờ:</label>
            <input type="text" id="hours" name="hours" class="mt-1 block w-full p-2 border border-gray-300 rounded" readonly>
        </div>
        <div class="mt-4">
            <label for="reason" class="block text-gray-700">Lý do yêu cầu:</label>
            <textarea id="reason" name="reason" class="mt-1 block w-full p-2 border border-gray-300 rounded" placeholder="Nhập lý do yêu cầu" required></textarea>
        </div>
        <div class="mt-4">
            <label for="employee" class="block text-gray-700">Nhân viên:</label>
            <input type="text" id="employee" name="employee" class="mt-1 block w-full p-2 border border-gray-300 rounded" value="Tên nhân viên hiện tại" readonly>
        </div>
        <div class="mt-4">
            <label for="project" class="block text-gray-700">Dự án:</label>
            <input type="text" id="project" name="project" class="mt-1 block w-full p-2 border border-gray-300 rounded" value="Tên dự án tự động hiển thị" readonly>
        </div>
        <div class="mt-4">
            <label for="role" class="block text-gray-700">Vai trò:</label>
            <input type="text" id="role" name="role" class="mt-1 block w-full p-2 border border-gray-300 rounded" value="Vai trò của nhân viên" readonly>
        </div>
        <div class="mt-6 text-center">
            <button type="button" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700" onclick="submitRequest()">Gửi yêu cầu</button>
            <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 ml-2" onclick="cancelRequest()">Hủy</button>
        </div>
    </form>
</main>

<script>
    function calculateHours() {
        const startTime = document.getElementById('start-time').value;
        const endTime = document.getElementById('end-time').value;

        if (startTime && endTime) {
            const start = new Date(`1970-01-01T${startTime}:00`);
            const end = new Date(`1970-01-01T${endTime}:00`);
            const hours = (end - start) / 3600000; // Chuyển đổi từ milliseconds sang hours
            document.getElementById('hours').value = hours >= 0 ? hours : 0;
        } else {
            document.getElementById('hours').value = '';
        }
    }

    document.getElementById('start-time').addEventListener('change', calculateHours);
    document.getElementById('end-time').addEventListener('change', calculateHours);

    function submitRequest() {
        alert('Yêu cầu đã được gửi!');
        // Logic để gửi yêu cầu có thể thêm ở đây
    }

    function cancelRequest() {
        alert('Đã hủy yêu cầu!');
        // Logic để hủy yêu cầu có thể thêm ở đây
    }
</script>
</body>
</html>